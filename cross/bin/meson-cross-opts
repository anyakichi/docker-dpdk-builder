#!/bin/bash

ARCH=${CROSS_ARCH:-$(uname -m)}
DISTRO=$(image2distro "${CROSS_IMAGE}")

if [[ ${CROSS_IMAGE} ]]; then
    output=(--cross-file "/assets/meson/common.txt")
    output+=(--cross-file "/assets/meson/arch_${ARCH}.txt")
    if [[ ${DISTRO} == alpine ]]; then
        output+=(--cross-file "/assets/meson/arch_${ARCH}_alpine.txt")
    fi
    output+=(--cross-file "/assets/meson/cross.txt")
    echo "${output[@]}"
else
    echo --native-file /assets/meson/common.txt
fi
